# Express
A huge portion of the Internet’s data travels over _HTTP/HTTPS_ through `request-response` cycles between _clients and servers_. Every time that you use a website, your browser sends requests to one or many servers requesting resources.

**Express** is a powerful but flexible Javascript _framework_ for creating `web servers and APIs`. It can be used for everything from simple static file servers to JSON APIs to full production servers.

## Starting A Server
Express is a Node module, so in order to use it, 
* We will need to import it into our program file. 
* To create a server, the imported express function must be invoked.
```
const express = require('express');
const app = express();
```
On the first line, we import the `Express` library with require. When invoked on the second line, it returns an instance of an Express application. This application can then be used to start a server and specify server behavior.

The purpose of a server is to _listen_ for requests, perform whatever action is required to satisfy the request, and then return a response. In order for our server to start responding, we have to tell the server where to listen for new requests by providing a **port** number argument to a method called `app.listen()`. The server will then listen on the specified port and respond to any requests that come into it.

The second argument is a _callback function_ that will be called once the server is running and ready to receive responses.
```
const PORT = process.env.PORT || 4001;
app.listen(PORT, () => {
  console.log(`Server is listening on port ${PORT}`);
});
```

To actually start your server listening, run the command `node app.js` to run your server in Node.

## Writing Routes
Once the Express server is listening, it can respond to any and all requests. But how does it know what to do with these requests? To tell our server how to deal with any given request, we register a series of routes. **Routes** define the _control flow_ for requests based on the `request’s path` and `HTTP verb`.

* The `path` is the part of a request URL `after the hostname and port number`, so in a request to `localhost:4001/monsters`, the path is `/monsters` (in this example, the hostname is ‘localhost’, the port number is ‘4001’).
* The `HTTP verb` is always included in the request, and it is one of a finite number of options used to specify expected functionality. GET, POST, PUT, DELETE, etc.

Express uses `app.get()` to register routes to match `GET` requests. Express routes (including app.get()) usually take **two** arguments, a _path_ (usually a string), and a _callback function_ to handle the request and send a response.

The route above will match any `GET request` to `'/moods'` and call the callback function, passing in two objects as the first two arguments. These objects represent the **request** sent to the server and the **response** that the Express server should eventually send to the client.

If no routes are matched on a client request, the Express server will handle sending a `404 Not Found` response to the client.

```
const moods = [{ mood: 'excited about express!'}, { mood: 'route-tastic!' }];
app.get('/moods', (req, res, next) => {
  // Here we would send back the moods array in response
});
```

## Sending A Response
HTTP follows a `one request, one response` cycle. Each client expects exactly one response per request, and each server should only send a single response back to the client per request. 

Express servers send responses using the `.send()` method on the response object. `.send()` will take any input and include it in the response body.

```
const monsters = [{ type: 'werewolf' }, { type: 'hydra' }, { type: 'chupacabra' }];
app.get('/monsters', (req, res, next) => {
  res.send(monsters);
});
```

In this example, a `GET /monsters` request will match the route, Express will call the callback function, and the `res.send()` method will send back an array of spooky monsters.

In addition to `.send()`, `.json()` can be used to explicitly send _JSON-formatted_ responses. `.json()` sends any JavaScript object passed into it.


